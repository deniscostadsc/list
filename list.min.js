(function(n){function t(n){var i=this;return n=n||[],i instanceof t==!1&&(i=new t(n)),i.items=n,i.length=n.length,i}t.fn=t.prototype;var i=function(n,t,i){return n[t].apply(n,i)},e=function(n,t,e){var r=i(n.items,t,e);return n.length=n.items.length,r},r=function(n,t){var i=n[t];return"function"==typeof i?i():i},u=function(n){return t(n).map(function(n){return n instanceof t?n.items:n}).items},f=function(n,t){var i=n.value,e=t.value;if(i!==e){if(i>e||void 0===i)return 1;if(e>i||void 0===e)return-1}return n.index<t.index?-1:1};t.fn.uniq=function(n){var i=t([]);return n||(n=function(n){return n}),this.select(function(t,e){var r=n(t,e);return i.includes(r)?!1:(i.push(r),!0)})},t.fn.unique=t.fn.uniq,t.fn.includes=function(n){return this.items.indexOf?-1!=this.items.indexOf(n):this.any(function(t){return t===n})},t.fn.contains=t.fn.includes,t.fn.any=function(n){return this.select(n).length>0},t.fn.some=t.fn.any,t.fn.all=function(n){return this.select(n).length===this.length},t.fn.every=t.fn.all,t.fn.countBy=function(n){var t;return"function"!=typeof n&&(t=n,n=function(n){return r(n,t)}),this.reduce({},function(t,i,e){var r=n(i,e);return t[r]=t[r]||0,t[r]+=1,t})},t.fn.first=function(n){return n?this.slice(0,n):this.items[0]},t.fn.last=function(n){return n?this.slice(-n):this.items[this.length-1]},t.fn.slice=function(n,i){return t(this.items.slice(n,i))},t.fn.compact=function(){return this.reject(function(n){return void 0===n||null===n})},t.fn.reject=function(n){return this.select(function(t,i){return!n(t,i)})},t.fn.filter=t.fn.reject,t.fn.select=function(n){return this.reduce(t([]),function(t,i,e){return n(i,e)&&t.push(i),t})},t.fn.reduce=function(n,t){var i=this;return"function"==typeof n&&(i=this.slice(1),t=n,n=this.first()),i.each(function(i,e){n=t(n,i,e)}),n},t.fn.each=function(n){for(var t=0;this.length>t;t++)n(this.items[t],t);return this},t.fn.map=function(n){var i;return"function"!=typeof n&&(i=n,n=function(n){return r(n,i)}),this.reduce(t([]),function(t,i,e){return t.push(n(i,e)),t})},t.fn.concat=function(){return this.items=this.items.concat.apply(this.items,u(arguments)),this.length=this.items.length,this},t.fn.push=function(){return e(this,"push",arguments)},t.fn.pop=function(){return e(this,"pop",arguments)},t.fn.unshift=function(){return e(this,"unshift",arguments)},t.fn.shift=function(){return e(this,"shift",arguments)},t.fn.sort=function(n){var i;return void 0===n?t(this.items.sort()):"function"==typeof n?t(this.items.sort(n)):(i=this.map(function(t,i){return{item:t,index:i,value:r(t,n)}}),i.sort(f),i.map("item"))},t.fn.reverse=function(){return this.reduce(t([]),function(n,t){return n.unshift(t),n})},t.fn.groupBy=function(n){var i;return"function"!=typeof n&&(i=n,n=function(n){return r(n,i)}),this.reduce({},function(i,e,r){var u=n(e,r);return i[u]=i[u]||t([]),i[u].push(e),i})},t.fn.groupsOf=function(n,i){var e,r=0,u=t([]),f=[];for(void 0!==i&&(f=t().fill(n,i));this.length>r;)e=this.slice(r,r+n),u.push(e.concat(f).first(n)),r=Math.min(r+n,this.length);return u},t.fn.fill=function(n,i){return t(Array(n)).map(function(){return i})},n.list=t})(void 0===typeof exports?this:exports);