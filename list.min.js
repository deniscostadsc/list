(function(n){"use strict";function t(n){var e=this;return n=n||[],e instanceof t==!1&&(e=new t(n)),e.items=n instanceof t?n.items:n,e.length=n.length,e}t.fn=t.prototype;var e={},i=function(n,t,e){return n[t].apply(n,e)},r=function(n,t,e){var r=i(n.items,t,e);return n.length=n.items.length,r},u=function(n,t){var e=n[t];return"function"==typeof e?e():e},f=function(n){return new t(n).map(function(n){return n instanceof t?n.items:n}).items},s=function(n,t){var e=n.value,i=t.value;if(e!==i){if(e>i||void 0===e)return 1;if(i>e||void 0===i)return-1}return n.index<t.index?-1:1};t.fn.uniq=function(n){var e=new t;return n||(n=function(n){return n}),this.select(function(t,i){var r=n(t,i);return e.includes(r)?!1:(e.push(r),!0)})},t.fn.unique=t.fn.uniq,t.fn.includes=function(n){return this.items.indexOf?-1!=this.items.indexOf(n):this.any(function(t){return t===n})},t.fn.contains=t.fn.includes,t.fn.any=function(n){var t=!1;return this.each(function(i,r){return t=n(i,r),t?e:void 0}),!!t},t.fn.some=t.fn.any,t.fn.all=function(n){return this.select(n).length===this.length},t.fn.every=t.fn.all,t.fn.countBy=function(n){var t;return"function"!=typeof n&&(t=n,n=function(n){return u(n,t)}),this.reduce({},function(t,e,i){var r=n(e,i);return t[r]=t[r]||0,t[r]+=1,t})},t.fn.first=function(n){return n?this.slice(0,n):this.items[0]},t.fn.last=function(n){return n?this.slice(-n):this.items[this.length-1]},t.fn.slice=function(n,e){return new t(this.items.slice(n,e))},t.fn.compact=function(){return this.reject(function(n){return void 0===n||null===n})},t.fn.reject=function(n){return this.select(function(t,e){return!n(t,e)})},t.fn.filter=t.fn.reject,t.fn.select=function(n){return this.reduce(new t,function(t,e,i){return n(e,i)&&t.push(e),t})},t.fn.find=function(n){var t;return this.any(function(i,r){return t=i,n(i,r)?e:void 0}),t},t.fn.reduce=function(n,t){var e=this;return"function"==typeof n&&(e=this.slice(1),t=n,n=this.first()),e.each(function(e,i){n=t(n,e,i)}),n},t.fn.each=function(n){for(var t,i=0;this.length>i&&(t=n(this.items[i],i),t!==e);i++);return this},t.fn.map=function(n){var e;return"function"!=typeof n&&(e=n,n=function(n){return u(n,e)}),this.reduce(new t,function(t,e,i){return t.push(n(e,i)),t})},t.fn.concat=function(){return this.items=this.items.concat.apply(this.items,f(arguments)),this.length=this.items.length,this},t.fn.push=function(){return r(this,"push",arguments)},t.fn.pop=function(){return r(this,"pop",arguments)},t.fn.unshift=function(){return r(this,"unshift",arguments)},t.fn.shift=function(){return r(this,"shift",arguments)},t.fn.sort=function(n){var e;return void 0===n?new t(this.items.sort()):"function"==typeof n?new t(this.items.sort(n)):(e=this.map(function(t,e){return{item:t,index:e,value:u(t,n)}}),e.sort(s),e.map("item"))},t.fn.reverse=function(){return this.reduce(new t,function(n,t){return n.unshift(t),n})},t.fn.groupBy=function(n){var e;return"function"!=typeof n&&(e=n,n=function(n){return u(n,e)}),this.reduce({},function(e,i,r){var u=n(i,r);return e[u]=e[u]||new t,e[u].push(i),e})},t.fn.groupsOf=function(n,e){var i,r=0,u=new t,f=[];for(void 0!==e&&(f=(new t).fill(n,e));this.length>r;)i=this.slice(r,r+n),u.push(i.concat(f).first(n)),r=Math.min(r+n,this.length);return u},t.fn.fill=function(n,e){return new t(Array(n)).map(function(){return e})},t.fn.shuffle=function(){for(var n,t,e=this.slice(),i=e.length-1;i>0;i--)n=Math.floor(Math.random()*(i+1)),t=e.items[i],e.items[i]=e.items[n],e.items[n]=t;return e},t.fn.sample=function(n){var t=this.shuffle();return n?t.first(n):t.first()},t.fn.where=function(n){return this.select(function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},t.fn.clear=function(){return this.items.length=0,this.length=0,this},t.fn.get=function(n){return this.items[n]},t.fn.set=function(n,t){return this.items[n]=t,this},n.List=t})("undefined"==typeof exports?this:exports);